import{a as e,u as t,c as a,m as l,r as s,w as n,Q as r,$ as o,R as i,p as d,o as c,d as u,i as v,g as p,t as g,j as h,k as m,n as b,E as y,h as f,v as w,F as C,q as L,s as I,l as x,B as k}from"./vendor.ee801e80.js";import{C as B}from"./auto.esm.22660870.js";import{P as D,D as A}from"./DateTime.b94132f4.js";import{_ as T}from"./index.9e640917.js";const E=e=>(L("data-v-455809b2"),e=e(),I(),e),j={key:0},$=[E((()=>p("i",{class:"pe-7s-angle-left pe-2x pe-va pe-fw"},null,-1)))],O={class:"mx-1 text-black py-1 px-1.5 bg-gray-300 font-bold rounded"},P=[E((()=>p("i",{class:"pe-7s-angle-right pe-2x pe-va pe-fw"},null,-1)))],R={class:"canvasSize"},S=E((()=>p("ul",{class:"opacity-80 hover:opacity-100"},[p("li",{class:"w-6 h-1 bg-gray-400 rounded"}),p("li",{class:"my-0.5 w-6 h-1 bg-gray-400 rounded"}),p("li",{class:"w-6 h-1 bg-gray-400 rounded"})],-1))),_={class:"pl-4"},G=E((()=>p("i",{class:"pe-7s-print pe-lg pe-va mr-1"},null,-1))),H={id:"pngBtn",class:"py-0.5 bg-gray-100 hover:bg-gray-200 hover:text-gray-700 border-b border-gray-200"},N={class:"pl-4"},F=E((()=>p("i",{class:"pe-7s-photo pe-lg pe-va mr-1"},null,-1))),z={id:"jpgBtn",class:"py-0.5 bg-gray-100 hover:bg-gray-200 hover:text-gray-700 border-b border-gray-200"},W={class:"pl-4"},M=E((()=>p("i",{class:"pe-7s-photo pe-lg pe-va mr-1"},null,-1))),U={id:"svgBtn",class:"py-0.5 bg-gray-100 hover:bg-gray-200 hover:text-gray-700 border-b border-gray-200"},X={class:"pl-4"},q=E((()=>p("i",{class:"pe-7s-download pe-lg pe-va mr-1"},null,-1))),V={id:"pdfBtn",class:"py-0.5 bg-gray-100 hover:bg-gray-200 hover:text-gray-700 rounded-b"},J={class:"pl-4"},K=E((()=>p("i",{class:"pe-7s-file pe-lg pe-va mr-1"},null,-1))),Q=E((()=>p("canvas",{id:"myChartHome"},null,-1)));var Y=T({props:{searchInput:String},setup(L){const I=L,x=e(),k=t();a((()=>k.state.resData.token)),a((()=>k.state.serverURL));const A=l(),T=a((()=>A.locale.value)),E=a((()=>"tw"==T.value?"按下長條圖可進入個別產線資料":"en"==T.value?"Click on the bar graph to enter individual production line information":"jp"==T.value?"棒グラフをクリックして、個々の生産ライン情報を入力します":"cn"==T.value?"按下长条图可进入个别产线资料":void 0)),Y=a((()=>"tw"==T.value?["目標","總件數"]:"cn"==T.value?["目标","总件数"]:"jp"==T.value?["目標","総数"]:"en"==T.value?["Target","Total"]:void 0)),Z=a((()=>"tw"==T.value?["目標","總件數","達成率"]:"cn"==T.value?["目标","总件数","达成率"]:"jp"==T.value?["目標","総数","達成率"]:"en"==T.value?["Target","Total","Achievement rate"]:void 0)),ee=s([]),te=s(12),ae=s(1),le=a((()=>{let e=1;return Array.isArray(ee.value)&&ee.value.length>0&&(e=Math.ceil(ee.value.length/te.value)),e})),se=a((()=>{let e=[];if(Array.isArray(ee.value)&&ee.value.length>0){let t=(ae.value-1)*te.value,a=ae.value*te.value;e=ee.value.slice(t,a)}return e})),ne=()=>{ae.value>1?ae.value--:ae.value=le.value},re=()=>{le.value>ae.value?ae.value++:ae.value=1},oe=()=>{ae.value=1,window.innerWidth<500?te.value=3:window.innerWidth<768?te.value=6:te.value=12};oe();const ie=s(!1),de=a((()=>{let e={lineIDLists:[],lineNameLists:[],dataTest1:[],dataTest2:[],dataTest3:[]};return[...se.value].map((t=>{e.lineIDLists.push(t.lineId||""),e.lineNameLists.push(t.lineName||""),e.dataTest1.push(t.totalReach||0),e.dataTest2.push(t.target||"0"),e.dataTest3.push(t.totalPiece||0)})),e}));n((()=>de.value.lineIDLists),(()=>ie.value=!0)),n((()=>de.value.lineNameLists),(()=>ie.value=!0)),n((()=>de.value.dataTest1),(()=>ie.value=!0)),n((()=>de.value.dataTest2),(()=>ie.value=!0)),n((()=>de.value.dataTest3),(()=>ie.value=!0));const ce=function(){return ee.value=k.state.fakeData.home};ce(),r((()=>{const e=document.getElementById("myChartHome");e.width=100,e.height=30;var t=e.getContext("2d").createLinearGradient(0,0,0,150);t.addColorStop(0,"#00FFFF"),t.addColorStop(1,"#75d1b8");const a=new B(e,{type:"bar",data:{labels:de.value.lineNameLists,datasets:[{label:Y.value[1],data:de.value.dataTest3,datalabels:{color:""},backgroundColor:t,borderColor:t,borderWidth:1,barThickness:25},{label:Y.value[0],data:de.value.dataTest2,datalabels:{color:""},backgroundColor:"rgba(16, 58, 80, 0.7)",borderColor:"rgba(16, 58, 80, 0.7)",borderWidth:1,barThickness:35}]},options:{responsive:!0,maintainAspectRatio:!1,layout:{padding:{top:20}},bezierCurve:!1,animations:!1,scales:{y:{ticks:{beginAtZero:!0,color:"white"},grid:{drawBorder:!1},suggestedMax:100},x:{ticks:{color:"white"},grid:{display:!1,drawBorder:!1},stacked:!0}},plugins:{legend:{display:!0,position:"bottom",labels:{usePointStyle:!0,boxWidth:8,font:{size:16,style:"italic"},color:"#fff"},onHover:(e,t)=>{e.chart.canvas.style.cursor="pointer"}},title:{display:!0,text:E.value,color:"white",font:{size:16}},tooltip:{displayColors:!1,callbacks:{beforeLabel:function(e){return Z.value[0]+" : "+de.value.dataTest2[e.dataIndex]},label:function(e){return Z.value[1]+" : "+de.value.dataTest3[e.dataIndex]},afterLabel:function(e){return Z.value[2]+" : "+de.value.dataTest1[e.dataIndex]+"%"}}}},onHover:(e,t)=>{t.length>0?e.chart.canvas.style.cursor="pointer":e.chart.canvas.style.cursor="default"},onClick:(e,t,a)=>{t[0]&&x.push({name:"SirubaLineBalance",query:{lineId:de.value.lineIDLists[t[0].index]}})}}});document.getElementById("myChartHome").onclick=function(e){let t=a.scales.x._labelItems,l=e.offsetX,s=e.offsetY;for(let a=0;a<t.length;a++)t[a].translation[0]+30>l&&t[a].translation[0]-30<l&&t[a].translation[1]+20>s&&t[a].translation[1]-20<s&&x.push({name:"SirubaLineBalance",query:{lineId:de.value.lineIDLists[a]}})},n((()=>T.value),(e=>{a.options.plugins.title.text=E.value,a.data.datasets[0].label=Y.value[1],a.data.datasets[1].label=Y.value[0],a.update()}));n((()=>ie.value),(e=>{e&&(a.data.labels=de.value.lineNameLists,a.data.datasets[0].data=de.value.dataTest3,a.data.datasets[1].data=de.value.dataTest2,a.update(),ie.value=!1)})),n((()=>I.searchInput),(e=>ce()));const l=function(){const t=document.createElement("canvas");t.width=e.width,t.height=e.height;const a=t.getContext("2d");return a.fillStyle="#1a114e",a.fillRect(0,0,e.width,e.height),a.drawImage(e,0,0),t.toDataURL("image/jpeg",1)};document.getElementById("printBtn").addEventListener("click",(function(){document.body.innerHTML=`<img src="${l()}">`,o((()=>{window.print(),location.reload()}))})),document.getElementById("jpgBtn").addEventListener("click",(function(){var e=document.createElement("a");e.download="chart.jpg",e.href=l(),e.click()})),document.getElementById("pngBtn").addEventListener("click",(function(){var e=document.createElement("a");e.setAttribute("href",l()),e.setAttribute("download","chart.png"),e.click()})),document.getElementById("pdfBtn").addEventListener("click",(function(){var t=document.createElement("a");const a=function(t,a){let l=function(e){let t=Array.from(atob(e),(e=>e.codePointAt())),a=t.length%4>0?4-t.length%4:0;for(;a-- >0;)t.push(0);let l="";for(let s=0,n=t.length;s+3<n;s+=4){let e=t[s]<<8|t[s+1],a=t[s+2]<<8|t[s+3],n="";for(let t=0;t<5;++t){let t=e%85<<16|a%85,l=t%85;e=(e-e%85)/85,a=(a-a%85)/85+(t-t%85)/85,e+=a>>>16,a&=65535,n=String.fromCodePoint(33+l)+n}l+=n}return l}(t.split("base64,")[1]),s=new D,n=s.preserveId(),r=s.preserveId(),o=s.preserveId(),i=s.preserveId(),d=s.preserveId(),c=s.preserveId();return s.addObject({Type:"/Catalog",Pages:`${r} 0 R`},!1,n),s.addObject({Type:"/Pages",Kids:`[${o} 0 R]`,Count:1},!1,r),s.addObject({Type:"/Page",Parent:`${r} 0 R`,Resources:`${i} 0 R`,Contents:`[${c} 0 R]`,MediaBox:"[0 0 595.27559 841.88976]"},!1,o),s.addObject({ProcSet:"[/PDF /ImageB ]",XObject:`<< /Im1 ${d} 0 R >>`},!1,i),s.addObject({Type:"/XObject",Subtype:"/Image",Width:e.width,Height:e.height,ColorSpace:"/DeviceRGB",BitsPerComponent:"8",Filter:"[/ASCII85Decode /DCTDecode]"},l+"~>",d),s.addObject({},`${a.width} 0 0 ${a.height} ${a.x} ${a.y} cm /Im1 Do`,c),s.toDataUrl(n)}(l(),{x:5,y:520,width:580,height:300});t.setAttribute("href",a),t.setAttribute("download","chart.pdf"),t.click()})),document.getElementById("svgBtn").addEventListener("click",(function(){var e=document.createElement("a");let t=`<img src="${l()}" />`;var a="data:image/svg+xml;charset=utf-8,"+encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg'><foreignObject width='100%' height='100%'><div xmlns='http://www.w3.org/1999/xhtml' style='font-size:16px;font-family:Helvetica'>"+t+"</div></foreignObject></svg>");e.setAttribute("href",a),e.setAttribute("download","chart.svg"),e.click()})),window.addEventListener("resize",oe)})),i((()=>{window.removeEventListener("resize",oe)}));const ue=a((()=>k.state.onClickAway.chartDownload)),ve=function(){ue.value?k.commit("onClickAwayChartDownload"):k.commit("onClickChartDownload")},pe=function(){k.commit("onClickAwayChartDownload")};return(e,t)=>{const a=d("click-away");return c(),u(C,null,[v(le)>1?(c(),u("div",j,[p("button",{class:"text-white",onClick:ne},$),p("span",O,g(ae.value)+" / "+g(v(le)),1),p("button",{class:"text-white",onClick:re},P)])):h("",!0),p("div",R,[m(p("div",{class:"float-right relative cursor-pointer",onClick:ve},[S,m(p("ul",{class:b(["absolute top-5 right-0 text-gray-500 border border-gray-300 rounded shadow",["jp"==v(T)?"w-48":"w-40"]])},[p("li",{id:"printBtn",class:"py-0.5 bg-gray-100 hover:bg-gray-200 hover:text-gray-700 border-b border-gray-200 rounded-t",onClick:t[0]||(t[0]=y(((...t)=>e.onClickPrint&&e.onClickPrint(...t)),["prevent"]))},[p("div",_,[G,f(g(e.$t("ChartDownLoad.CDL_PRINT")),1)])]),p("li",H,[p("div",N,[F,f(g(e.$t("ChartDownLoad.CDL_PNG")),1)])]),p("li",z,[p("div",W,[M,f(g(e.$t("ChartDownLoad.CDL_JPG")),1)])]),p("li",U,[p("div",X,[q,f(g(e.$t("ChartDownLoad.CDL_SVG")),1)])]),p("li",V,[p("div",J,[K,f(g(e.$t("ChartDownLoad.CDL_PDF")),1)])])],2),[[w,v(ue)]])],512),[[a,pe]]),Q])],64)}}},[["__scopeId","data-v-455809b2"]]);const Z={class:"flex sm:block py-4 sm:mb-4 text-3xl text-orange-siruba"},ee={class:"mr-4"},te={class:"font-semibold sm:text-base"},ae={class:"w-full shadow"},le={class:"my-4 flex sm:block sm:relative items-center justify-between h-16 sm:h-28 pl-8 sm:pl-4 pr-10 sm:pr-4 sm:pt-3 titleStyle sirubaBorder"},se={class:"flex sm:block"},ne={class:"flex items-center mr-10 sm:mr-1 sm:mb-5"},re={class:"md:relative"},oe=["placeholder"],ie={class:"py-7 px-5 sirubaBorder"},de={setup(e){const t=s(""),a=s(""),l=function(){t.value=a.value},n=function(){a.value="",t.value=""};return(e,s)=>(c(),u(C,null,[p("h1",Z,[p("p",ee,g(e.$t("GLOBAL.GLOBAL_TIME"))+":",1),p("p",te,[x(A)])]),p("div",ae,[p("div",le,[p("div",se,[p("span",ne,g(e.$t("Index.INDEX_LINEINFO")),1),p("div",re,[m(p("input",{type:"search",class:"form-control myInput rounded-r-none w-80 md:w-72 md:rounded-r sm:w-full",placeholder:e.$t("Index.INDEX_PLACEHOLDER"),"onUpdate:modelValue":s[0]||(s[0]=e=>a.value=e)},null,8,oe),[[k,a.value]]),p("button",{type:"button",class:"btn btnBlueColor rounded-l-none md:hidden",onClick:l},g(e.$t("GLOBAL.GLOBAL_SEARCH")),1),p("button",{type:"button",class:"hidden md:inline btn btnSearchColor absolute right-0",onClick:l},g(e.$t("GLOBAL.GLOBAL_SEARCH")),1)])]),p("button",{type:"button",class:"btn btnBlueColor sm:absolute sm:top-2 sm:right-4",onClick:n},g(e.$t("GLOBAL.GLOBAL_SHOWALL")),1)]),p("div",ie,[x(Y,{searchInput:t.value},null,8,["searchInput"])])])],64))}};export{de as default};
