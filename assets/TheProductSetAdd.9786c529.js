import{_ as e,d as s}from"./index.9e640917.js";import{d as t}from"./vuedraggable.umd.bb1aeaca.js";import{u as l,m as a,a as r,A as o,c,r as p,w as u,b as n,d,g as i,t as v,j as S,l as m,f as h,i as y,F as g,q as b,s as f,z as P,o as A,n as C,h as w}from"./vendor.ee801e80.js";const k=e=>(b("data-v-606b7576"),e=e(),f(),e),I={class:"mt-12 flex sm:flex-wrap py-4 sm:mb-4 text-4xl text-orange-siruba"},x={class:"mr-5 sm:mr-2 sm:mb-1"},L={class:"sm:hidden"},B={class:"hidden sm:block"},E={class:"mb-5 w-full shadow sirubaBorder"},_={class:"flex sm:block items-center justify-between h-16 sm:h-auto sm:py-2 pl-8 sm:pl-4 pr-10 sm:pr-4 titleStyle"},T={class:"sm:mb-2 w-2/4 lg:w-8/12 sm:w-full"},D={class:"flex sm:block items-center justify-between text-xl sm:text-lg"},N={class:"mr-5 sm:mr-0"},O={class:"w-full md:w-full md:shadow sirubaBorder"},$={class:"flex items-center justify-between h-16 pl-8 sm:pl-4 pr-10 sm:pr-4 titleStyle"},G={class:"flex items-center text-xl"},j=k((()=>i("i",{class:"pe-7s-ticket pe-lg pe-va"},null,-1))),q={class:"ml-2"},M={class:"px-4 sm:px-2 py-6 sm:py-4 text-white text-sm shadow md:shadow-none"},R={class:"mt-5 sm:mt-0"},F={class:"w-full shadow-2xl"},U={class:"tableThStyle"},V=k((()=>i("th",{class:"tableBorderStyle hover:bg-purple-600"},"No.",-1))),H={key:0,class:"pl-1"},W={key:1,class:"pe-7s-angle-down pe-lg pe-va"},z={key:2,class:"pe-7s-angle-up pe-lg pe-va"},J={key:0,class:"pl-1"},K={key:1,class:"pe-7s-angle-down pe-lg pe-va"},Z={key:2,class:"pe-7s-angle-up pe-lg pe-va"},Q={key:0,class:"pl-1"},X={key:1,class:"pe-7s-angle-down pe-lg pe-va"},Y={key:2,class:"pe-7s-angle-up pe-lg pe-va"},ee={key:0,class:"pl-1"},se={key:1,class:"pe-7s-angle-down pe-lg pe-va"},te={key:2,class:"pe-7s-angle-up pe-lg pe-va"},le={key:0,class:"pl-1"},ae={key:1,class:"pe-7s-angle-down pe-lg pe-va"},re={key:2,class:"pe-7s-angle-up pe-lg pe-va"},oe={key:0,class:"pl-1"},ce={key:1,class:"pe-7s-angle-down pe-lg pe-va"},pe={key:2,class:"pe-7s-angle-up pe-lg pe-va"},ue={key:0,class:"pl-1"},ne={key:1,class:"pe-7s-angle-down pe-lg pe-va"},de={key:2,class:"pe-7s-angle-up pe-lg pe-va"},ie={key:0,class:"pl-1"},ve={key:1,class:"pe-7s-angle-down pe-lg pe-va"},Se={key:2,class:"pe-7s-angle-up pe-lg pe-va"},me={key:0,class:"pl-1"},he={key:1,class:"pe-7s-angle-down pe-lg pe-va"},ye={key:2,class:"pe-7s-angle-up pe-lg pe-va"},ge={class:"tableBorderStyle"},be={class:"tableBorderStyle text-center cursor-move"},fe={class:"tableBorderStyle text-center"},Pe={class:"w-full h-full"},Ae={key:0,class:"pe-7s-star"},Ce={class:"tableBorderStyle text-center"},we={class:"w-full h-full"},ke={class:"tableBorderStyle text-center"},Ie={class:"w-full h-full"},xe={class:"tableBorderStyle text-center"},Le={class:"w-full h-full"},Be={class:"tableBorderStyle text-center"},Ee={class:"w-full h-full"},_e={class:"tableBorderStyle text-center"},Te={class:"w-full h-full"},De={class:"tableBorderStyle text-center"},Ne={class:"w-full h-full"},Oe={class:"tableBorderStyle text-center"},$e={class:"w-full h-full"},Ge={class:"tableBorderStyle text-center"},je={class:"w-full h-full"},qe={class:"py-2 tableBorderStyle cursor-text sm:cursor-pointer sm:bg-red-500 sm:bg-opacity-50 sm:hover:bg-opacity-90 text-center sm:text-white"},Me=["onClick"],Re={class:"lg:hidden"},Fe=k((()=>i("span",{class:"hidden lg:inline"},[i("i",{class:"pe-7s-trash pe-lg pe-va"})],-1))),Ue=["onClick"],Ve=[k((()=>i("i",{class:"pe-7s-trash pe-lg pe-va"},null,-1)))],He={class:"mt-5 flex flex-row-reverse pr-8 sm:pr-2"};var We=e({props:{newProcessName:String},setup(e){const b=e,f=l(),k=a(),We=r(),ze=o(),Je=c((()=>f.state.resData.token)),Ke=c((()=>f.state.serverURL)),Ze=c((()=>f.state.processTypeList)),Qe=c((()=>ze.query.productId)),Xe=c((()=>k.locale.value)),Ye=p([]),es=p(""),ss=p(""),ts=p(!1),ls=p([]),as=p([]),rs=(e=ls.value)=>{let s=[];if(Array.isArray(e)&&e.length>0){let t=Ze.value[Xe.value];s=e.map((e=>{let s=e.processType||"";return t[s]}))}return s},os=()=>We.push({name:"ProductSet",params:{productId:Qe.value}}),cs=function(){if(b.isProcessEditSuccess&&(ts.value=!0),!Qe.value)return console.warn("id is not correct");let e=new FormData;e.append("token",Je.value),e.append("productId",Qe.value),P.post(`http://${Ke.value}/process.php`,e).then((e=>{if(s(e.data),1==e.data.status){let s=e.data.data;if(s.productList&&"object"==typeof s.productList&&!Array.isArray(s.productList)&&(es.value=s.productList.productName||"",ss.value=s.productList.productSize||""),Array.isArray(s.processList)||!s.processList){Ye.value=s.processList||[],ls.value=[...Ye.value],as.value=rs();let e=ls.value.map((e=>e.processName||""));sessionStorage.setItem("processNameArray",JSON.stringify(e))}}else 2==e.data.status?We.push("/login"):console.warn("else")})).catch((e=>{console.error("error")}))};cs();const ps=p(["","","","","","","","","","",""]),us=function(e){for(let s=0;s<ps.value.length;s++)s!=e&&(ps.value[s]="")},ns=function(e,s){switch(us(e),ps.value[e]){case"ASC":ls.value.reverse(),ps.value[e]="DESC";break;case"DESC":cs(),us();break;default:ls.value.sort((function(e,t){let l=parseFloat(e[s],10),a=parseFloat(t[s],10);return l>a?1:l<a?-1:0})),ps.value[e]="ASC"}},ds=function(e){if("processName"==e)switch(us(0),ps.value[0]){case"ASC":ls.value.reverse(),ps.value[0]="DESC";break;case"DESC":cs(),us();break;default:ls.value.sort((function(e,s){let t=e.processName.toLowerCase(),l=s.processName.toLowerCase();return t>l?1:t<l?-1:0})),ps.value[0]="ASC"}"ProcessStdTime"==e&&ns(1,"ProcessStdTime"),"processStitch"==e&&ns(2,"processStitch"),"processStitchM"==e&&ns(3,"processStitchM"),"processStitchP"==e&&ns(4,"processStitchP"),"processCut"==e&&ns(5,"processCut"),"ProcessTimes"==e&&ns(6,"ProcessTimes"),"ProcessType"==e&&ns(7,"ProcessType"),"ProcessGSD"==e&&ns(8,"processGSD"),"ProcessSTDSiruba"==e&&ns(9,"processSTD"),"processStitchLength"==e&&ns(10,"processStitchLength"),as.value=rs()};u((()=>b.newProcessName),(e=>{e&&(ts.value=!0,cs(),"tw"==Xe.value&&alert("新增成功"),"en"==Xe.value&&alert("added successfully"),"jp"==Xe.value&&alert("正常に追加されました"),"cn"==Xe.value&&alert("新增成功"))}));const is=function(){f.commit("onPopupForm","processAdd"),f.commit("onPopupOtherData",Qe.value),f.commit("onPopupOtherData3",JSON.parse(sessionStorage.getItem("processNameArray"))),f.commit("onPopupOtherData4","TheProductSetAdd")},vs=(Ss=!1,()=>{if(0==ls.value.length||Ss)return;Ss=!0;let e=new FormData;e.append("token",Je.value),e.append("productId",Qe.value);for(let s=0;s<ls.value.length;s++)e.append(`process[${s}]`,ls.value[s].processId);P.post(`http://${Ke.value}/insertsql/41_process_update.php`,e).then((e=>{1==e.data.status?("tw"==Xe.value&&alert("更新成功"),"en"==Xe.value&&alert("Update Success"),"jp"==Xe.value&&alert("更新に成功"),"cn"==Xe.value&&alert("更新成功"),Ss=!1):2==e.data.status?We.push("/login"):3==e.data.status?console.warn("status 3"):console.warn("else")})).catch((e=>{console.error("error")}))});var Ss;const ms=function(e){let t="";if("tw"==Xe.value&&(t="確定刪除?"),"en"==Xe.value&&(t="confirm delete?"),"jp"==Xe.value&&(t="削除を確認?"),"cn"==Xe.value&&(t="确定删除?"),1==confirm(t)){if(!Array.isArray(ls.value))return console.error("lists' type is not array");let l=ls.value.findIndex((s=>s.processId==e));if(-1==l)return console.warn("id is not correct");if(1==ls.value[l].processMajor)return"tw"==Xe.value&&(t="不能刪除主要製程"),"en"==Xe.value&&(t="Cannot delete major process"),"jp"==Xe.value&&(t="主要なプロセスを削除できません"),"cn"==Xe.value&&(t="不能删除主要制程"),alert(t);let a=new FormData;a.append("token",Je.value),a.append("productId",Qe.value),a.append("processId",e),P.post(`http://${Ke.value}/insertsql/process_del.php`,a).then((e=>{if(s(e.data),1==e.data.status){let e="";"tw"==Xe.value&&(e="刪除成功"),"en"==Xe.value&&(e="Delete Success"),"jp"==Xe.value&&(e="削除に成功"),"cn"==Xe.value&&(e="删除成功"),alert(e),cs(),ts.value=!0}else 2==e.data.status?We.push("/login"):console.warn("else")})).catch((e=>{console.error("error")}))}};u((()=>Xe.value),(()=>as.value=rs()));const hs=()=>f.commit("onPopupForm","processImport");return(e,s)=>{const l=n("router-link");return A(),d(g,null,[i("h1",I,[i("span",x,v(e.$t("ProductSetAdd.PSA_NEWPRODUCT")),1),i("button",{class:"btn btnBlueColor sm:mb-1",onClick:os},[i("span",L,v(e.$t("ProductSetAdd.PSA_BACK")),1),i("span",B,v(e.$t("GLOBAL.GLOBAL_PREVIOUSPAGE")),1)])]),i("div",E,[i("div",_,[i("div",T,[i("span",D,[i("p",N,v(e.$t("ProductSetAdd.PSA_PRODUCT"))+":"+v(es.value),1),i("p",null,v(e.$t("ProductSetAdd.PSA_SIZE"))+":"+v(ss.value),1)])])])]),i("div",O,[i("div",$,[i("div",G,[j,i("span",q,v(e.$t("ProductSetEdit.PSE_TITLE")),1)]),i("div",null,[i("button",{class:"mx-2 sm:mx-1 btn btnGreenColor",onClick:hs},v(e.$t("GLOBAL.GLOBAL_IMPORT")),1),i("button",{class:"btn btnBlueColor",onClick:is},v(e.$t("ProductSetAdd.PSA_NEWPROCESS")),1)])]),i("div",M,[i("div",R,[i("table",F,[i("thead",null,[i("tr",U,[V,i("th",{class:"tableBorderStyle cursor-pointer hover:bg-purple-600",onClick:s[0]||(s[0]=e=>ds("processName"))},[i("span",null,v(e.$t("ProductSetAdd.PSA_PROCESS")),1),""==ps.value[0]?(A(),d("span",H,"↕")):S("",!0),"ASC"==ps.value[0]?(A(),d("i",W)):S("",!0),"DESC"==ps.value[0]?(A(),d("i",z)):S("",!0)]),i("th",{class:"tableBorderStyle cursor-pointer hover:bg-purple-600",onClick:s[1]||(s[1]=e=>ds("processStitch"))},[i("span",null,v(e.$t("ProductSetAdd.PSA_STITCH")),1),""==ps.value[2]?(A(),d("span",J,"↕")):S("",!0),"ASC"==ps.value[2]?(A(),d("i",K)):S("",!0),"DESC"==ps.value[2]?(A(),d("i",Z)):S("",!0)]),i("th",{class:"tableBorderStyle cursor-pointer hover:bg-purple-600",onClick:s[2]||(s[2]=e=>ds("processStitchLength"))},[i("span",null,v(e.$t("GLOBAL.GLOBAL_STITCH_Length")),1),""==ps.value[10]?(A(),d("span",Q,"↕")):S("",!0),"ASC"==ps.value[10]?(A(),d("i",X)):S("",!0),"DESC"==ps.value[10]?(A(),d("i",Y)):S("",!0)]),i("th",{class:"tableBorderStyle cursor-pointer hover:bg-purple-600",onClick:s[3]||(s[3]=e=>ds("processStitchM"))},[i("span",null,v(e.$t("ProductSetAdd.PSA_STITCHLOWLIM")),1),""==ps.value[3]?(A(),d("span",ee,"↕")):S("",!0),"ASC"==ps.value[3]?(A(),d("i",se)):S("",!0),"DESC"==ps.value[3]?(A(),d("i",te)):S("",!0)]),i("th",{class:"tableBorderStyle cursor-pointer hover:bg-purple-600",onClick:s[4]||(s[4]=e=>ds("processStitchP"))},[i("span",null,v(e.$t("ProductSetAdd.PSA_STITCHUPLIM")),1),""==ps.value[4]?(A(),d("span",le,"↕")):S("",!0),"ASC"==ps.value[4]?(A(),d("i",ae)):S("",!0),"DESC"==ps.value[4]?(A(),d("i",re)):S("",!0)]),i("th",{class:"tableBorderStyle cursor-pointer hover:bg-purple-600",onClick:s[5]||(s[5]=e=>ds("processCut"))},[i("span",null,v(e.$t("ProductSetAdd.PSA_TRIM")),1),""==ps.value[5]?(A(),d("span",oe,"↕")):S("",!0),"ASC"==ps.value[5]?(A(),d("i",ce)):S("",!0),"DESC"==ps.value[5]?(A(),d("i",pe)):S("",!0)]),i("th",{class:"tableBorderStyle cursor-pointer hover:bg-purple-600",onClick:s[6]||(s[6]=e=>ds("ProcessTimes"))},[i("span",null,v(e.$t("ProductSetAdd.PSA_TIMES")),1),""==ps.value[6]?(A(),d("span",ue,"↕")):S("",!0),"ASC"==ps.value[6]?(A(),d("i",ne)):S("",!0),"DESC"==ps.value[6]?(A(),d("i",de)):S("",!0)]),i("th",{class:"tableBorderStyle cursor-pointer hover:bg-purple-600",onClick:s[7]||(s[7]=e=>ds("ProcessGSD"))},[i("span",null,v(e.$t("ProductSetAdd.PSA_GSD")),1),""==ps.value[8]?(A(),d("span",ie,"↕")):S("",!0),"ASC"==ps.value[8]?(A(),d("i",ve)):S("",!0),"DESC"==ps.value[8]?(A(),d("i",Se)):S("",!0)]),i("th",{class:"tableBorderStyle cursor-pointer hover:bg-purple-600 py-2",onClick:s[8]||(s[8]=e=>ds("ProcessType"))},[i("span",null,v(e.$t("ProductSetAdd.PSA_CAL")),1),""==ps.value[7]?(A(),d("span",me,"↕")):S("",!0),"ASC"==ps.value[7]?(A(),d("i",he)):S("",!0),"DESC"==ps.value[7]?(A(),d("i",ye)):S("",!0)]),i("th",ge,v(e.$t("GLOBAL.GLOBAL_DELETE")),1)])]),m(y(t),{modelValue:ls.value,"onUpdate:modelValue":s[9]||(s[9]=e=>ls.value=e),tag:"tbody","item-key":"name"},{item:h((({element:s,index:t})=>[i("tr",{class:C(["cursor-pointer hover:bg-purple-400",[[s.processName==b.newProcessName?"isNewBgColor":""],[1==s.processMajor?"text-green-300":"text-white"]]])},[i("td",be,v(t+1),1),i("td",fe,[m(l,{to:{name:"ProductSetEditNext",query:{productId:y(Qe),processId:s.processId}}},{default:h((()=>[i("div",Pe,[1==s.processMajor?(A(),d("i",Ae)):S("",!0),w(" "+v(s.processName),1)])])),_:2},1032,["to"])]),i("td",Ce,[m(l,{to:{name:"ProductSetEditNext",query:{productId:y(Qe),processId:s.processId}}},{default:h((()=>[i("div",we,v(s.processStitch),1)])),_:2},1032,["to"])]),i("td",ke,[m(l,{to:{name:"ProductSetEditNext",query:{productId:y(Qe),processId:s.processId}}},{default:h((()=>[i("div",Ie,v(s.processStitchLength),1)])),_:2},1032,["to"])]),i("td",xe,[m(l,{to:{name:"ProductSetEditNext",query:{productId:y(Qe),processId:s.processId}}},{default:h((()=>[i("div",Le,v(s.processStitchM),1)])),_:2},1032,["to"])]),i("td",Be,[m(l,{to:{name:"ProductSetEditNext",query:{productId:y(Qe),processId:s.processId}}},{default:h((()=>[i("div",Ee,v(s.processStitchP),1)])),_:2},1032,["to"])]),i("td",_e,[m(l,{to:{name:"ProductSetEditNext",query:{productId:y(Qe),processId:s.processId}}},{default:h((()=>[i("div",Te,v(s.processCut),1)])),_:2},1032,["to"])]),i("td",De,[m(l,{to:{name:"ProductSetEditNext",query:{productId:y(Qe),processId:s.processId}}},{default:h((()=>[i("div",Ne,v(s.processTimes),1)])),_:2},1032,["to"])]),i("td",Oe,[m(l,{to:{name:"ProductSetEditNext",query:{productId:y(Qe),processId:s.processId}}},{default:h((()=>[i("div",$e,v(s.processGSD),1)])),_:2},1032,["to"])]),i("td",Ge,[m(l,{to:{name:"ProductSetEditNext",query:{productId:y(Qe),processId:s.processId}}},{default:h((()=>[i("div",je,v(as.value[t]),1)])),_:2},1032,["to"])]),i("td",qe,[i("button",{class:"sm:hidden btn btnRedColor",onClick:e=>ms(s.processId)},[i("span",Re,v(e.$t("GLOBAL.GLOBAL_DELETE")),1),Fe],8,Me),i("span",{class:"hidden sm:inline",onClick:e=>ms(s.processId)},Ve,8,Ue)])],2)])),_:1},8,["modelValue"])])]),i("div",He,[i("button",{class:"btn btnBlueColor",onClick:s[10]||(s[10]=(...e)=>y(vs)&&y(vs)(...e))},v(e.$t("GLOBAL.GLOBAL_SAVESORT")),1)])])])],64)}}},[["__scopeId","data-v-606b7576"]]);export{We as default};
