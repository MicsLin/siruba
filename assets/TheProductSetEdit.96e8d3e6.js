import{d as e}from"./vuedraggable.umd.bb1aeaca.js";import{u as s,m as t,a as l,A as a,c as r,r as o,w as c,b as p,d as u,g as d,t as n,j as i,l as S,f as v,i as m,F as h,q as y,s as P,M as b,O as A,o as g,n as C,h as f}from"./vendor.ee801e80.js";import{_ as k}from"./index.9e640917.js";const L=e=>(y("data-v-1284cd9f"),e=e(),P(),e),I={class:"mt-12 flex sm:flex-wrap py-4 sm:mb-4 text-4xl text-orange-siruba"},_={class:"mr-5 sm:mr-2 sm:mb-1"},E={class:"sm:hidden"},x={class:"hidden sm:block"},T={class:"mb-5 w-full shadow sirubaBorder"},w={class:"flex sm:block items-center justify-between h-16 sm:h-auto sm:py-2 pl-8 sm:pl-4 pr-10 sm:pr-4 titleStyle"},B={class:"sm:mb-2 w-2/4 lg:w-8/12 sm:w-full"},N={class:"flex sm:block items-center justify-between text-xl sm:text-lg"},O={class:"mr-5 sm:mr-0"},D={class:"w-full md:w-full md:shadow sirubaBorder"},G={class:"flex items-center justify-between h-16 pl-8 sm:pl-4 pr-10 sm:pr-4 titleStyle"},$={class:"flex items-center text-xl"},M=L((()=>d("i",{class:"pe-7s-ticket pe-lg pe-va"},null,-1))),R={class:"ml-2"},j={class:"px-4 sm:px-2 py-6 sm:py-4 text-white text-sm shadow md:shadow-none"},q={class:"mt-5 sm:mt-0"},H={class:"w-full shadow-2xl"},U={class:"tableThStyle"},F=L((()=>d("th",{class:"tableBorderStyle hover:bg-purple-600"},"No.",-1))),V={key:0,class:"pl-1"},J={key:1,class:"pe-7s-angle-down pe-lg pe-va"},W={key:2,class:"pe-7s-angle-up pe-lg pe-va"},z={key:0,class:"pl-1"},K={key:1,class:"pe-7s-angle-down pe-lg pe-va"},X={key:2,class:"pe-7s-angle-up pe-lg pe-va"},Z={key:0,class:"pl-1"},Q={key:1,class:"pe-7s-angle-down pe-lg pe-va"},Y={key:2,class:"pe-7s-angle-up pe-lg pe-va"},ee={key:0,class:"pl-1"},se={key:1,class:"pe-7s-angle-down pe-lg pe-va"},te={key:2,class:"pe-7s-angle-up pe-lg pe-va"},le={key:0,class:"pl-1"},ae={key:1,class:"pe-7s-angle-down pe-lg pe-va"},re={key:2,class:"pe-7s-angle-up pe-lg pe-va"},oe={key:0,class:"pl-1"},ce={key:1,class:"pe-7s-angle-down pe-lg pe-va"},pe={key:2,class:"pe-7s-angle-up pe-lg pe-va"},ue={key:0,class:"pl-1"},de={key:1,class:"pe-7s-angle-down pe-lg pe-va"},ne={key:2,class:"pe-7s-angle-up pe-lg pe-va"},ie={key:0,class:"pl-1"},Se={key:1,class:"pe-7s-angle-down pe-lg pe-va"},ve={key:2,class:"pe-7s-angle-up pe-lg pe-va"},me={key:0,class:"pl-1"},he={key:1,class:"pe-7s-angle-down pe-lg pe-va"},ye={key:2,class:"pe-7s-angle-up pe-lg pe-va"},Pe={class:"tableBorderStyle"},be={class:"tableBorderStyle text-center cursor-move"},Ae={class:"tableBorderStyle text-center"},ge={class:"w-full h-full"},Ce={key:0,class:"pe-7s-star"},fe={class:"tableBorderStyle text-center"},ke={class:"w-full h-full"},Le={class:"tableBorderStyle text-center"},Ie={class:"w-full h-full"},_e={class:"tableBorderStyle text-center"},Ee={class:"w-full h-full"},xe={class:"tableBorderStyle text-center"},Te={class:"w-full h-full"},we={class:"tableBorderStyle text-center"},Be={class:"w-full h-full"},Ne={class:"tableBorderStyle text-center"},Oe={class:"w-full h-full"},De={class:"tableBorderStyle text-center"},Ge={class:"w-full h-full"},$e={class:"tableBorderStyle text-center"},Me={class:"w-full h-full"},Re={class:"py-2 tableBorderStyle cursor-text sm:cursor-pointer sm:bg-red-500 sm:bg-opacity-50 sm:hover:bg-opacity-90 text-center sm:text-white"},je=["onClick"],qe={class:"lg:hidden"},He=L((()=>d("span",{class:"hidden lg:inline"},[d("i",{class:"pe-7s-trash pe-lg pe-va"})],-1))),Ue=["onClick"],Fe=[L((()=>d("i",{class:"pe-7s-trash pe-lg pe-va"},null,-1)))],Ve={class:"mt-5 flex flex-row-reverse pr-8 sm:pr-2"};var Je=k({props:{newProcessName:String},setup(y){const P=y,k=s(),L=t(),Je=l(),We=a();r((()=>k.state.resData.token)),r((()=>k.state.serverURL));const ze=r((()=>k.state.processTypeList)),Ke=r((()=>We.query.productId)),Xe=r((()=>L.locale.value)),Ze=o([]),Qe=o(""),Ye=o(""),es=o(!1),ss=o([]),ts=o([]),ls=(e=ss.value)=>{let s=[];if(Array.isArray(e)&&e.length>0){let t=ze.value[Xe.value];s=e.map((e=>{let s=e.processType||"";return t[s]}))}return s},as=()=>{es.value?Je.push({name:"ProductSet",params:{productId:Ke.value}}):Je.push("/product_set")},rs=function(){let e=k.state.fakeData.theProductSetEdit[Ke.value];if(e&&(e.productList&&"object"==typeof e.productList&&!Array.isArray(e.productList)&&(Qe.value=e.productList.productName||"",Ye.value=e.productList.productSize||""),Array.isArray(e.processList)||!e.processList)){Ze.value=e.processList||[],ss.value=[...Ze.value],ts.value=ls();let s=ss.value.map((e=>e.processName||""));sessionStorage.setItem("processNameArray",JSON.stringify(s))}};rs();const os=o(["","","","","","","","","","",""]),cs=function(e){for(let s=0;s<os.value.length;s++)s!=e&&(os.value[s]="")},ps=function(e,s){switch(cs(e),os.value[e]){case"ASC":ss.value.reverse(),os.value[e]="DESC";break;case"DESC":rs(),cs();break;default:ss.value.sort((function(e,t){let l=parseFloat(e[s],10),a=parseFloat(t[s],10);return l>a?1:l<a?-1:0})),os.value[e]="ASC"}},us=function(e){if("processName"==e)switch(cs(0),os.value[0]){case"ASC":ss.value.reverse(),os.value[0]="DESC";break;case"DESC":rs(),cs();break;default:ss.value.sort((function(e,s){let t=e.processName.toLowerCase(),l=s.processName.toLowerCase();return t>l?1:t<l?-1:0})),os.value[0]="ASC"}"ProcessStdTime"==e&&ps(1,"ProcessStdTime"),"processStitch"==e&&ps(2,"processStitch"),"processStitchM"==e&&ps(3,"processStitchM"),"processStitchP"==e&&ps(4,"processStitchP"),"processCut"==e&&ps(5,"processCut"),"ProcessTimes"==e&&ps(6,"ProcessTimes"),"ProcessType"==e&&ps(7,"ProcessType"),"ProcessGSD"==e&&ps(8,"processGSD"),"ProcessSTDSiruba"==e&&ps(9,"processSTD"),"processStitchLength"==e&&ps(10,"processStitchLength"),ts.value=ls()};c((()=>P.newProcessName),(e=>{e&&(es.value=!0,rs(),"tw"==Xe.value&&alert("新增成功"),"en"==Xe.value&&alert("added successfully"),"jp"==Xe.value&&alert("正常に追加されました"),"cn"==Xe.value&&alert("新增成功"))}));const ds=function(){k.commit("onPopupForm","processAdd"),k.commit("onPopupOtherData",Ke.value),k.commit("onPopupOtherData3",JSON.parse(sessionStorage.getItem("processNameArray"))),k.commit("onPopupOtherData4","TheProductSetEdit")},ns=void 0;c((()=>Xe.value),(()=>ts.value=ls()));const is=()=>{let e=[],s=L.messages.value[Xe.value].ProductSetAdd,t=[s.PSA_PROCESS,s.PSA_STITCH,s.PSA_STITCH_LENGTH,s.PSA_STITCHLOWLIM,s.PSA_STITCHUPLIM,s.PSA_TRIM,s.PSA_TIMES,s.PSA_GSD,s.PSA_CAL,s.PSA_RUNNING_TIME,s.PSA_TOLERANCE,s.PSA_MAJOR,s.PSA_ORDER];e.push(t),Ze.value.forEach((s=>{let t=[s.processName,s.processStitch,s.processStitchLength,s.processStitchP,s.processStitchM,s.processCut,s.processTimes,s.processGSD,s.processType,s.processG10,s.processG10Interval,s.processMajor,s.processSort];e.push(t)}));let l=b.book_new(),a=b.aoa_to_sheet(e);b.book_append_sheet(l,a,"Sheet1");let r="process_list"+`(${Qe.value}_${Ye.value})_`+(new Date).getTime()+".xlsx";A(l,r)},Ss=()=>k.commit("onPopupForm","processImport");return(s,t)=>{const l=p("router-link");return g(),u(h,null,[d("h1",I,[d("span",_,n(s.$t("ProductSetEdit.PSE_TITLE")),1),d("button",{class:"btn btnBlueColor sm:mb-1",onClick:as},[d("span",E,n(s.$t("ProductSetAdd.PSA_BACK")),1),d("span",x,n(s.$t("GLOBAL.GLOBAL_PREVIOUSPAGE")),1)])]),d("div",T,[d("div",w,[d("div",B,[d("span",N,[d("p",O,n(s.$t("ProductSetAdd.PSA_PRODUCT"))+":"+n(Qe.value),1),d("p",null,n(s.$t("ProductSetAdd.PSA_SIZE"))+":"+n(Ye.value),1)])])])]),d("div",D,[d("div",G,[d("div",$,[M,d("span",R,n(s.$t("ProductSetEdit.PSE_TITLE")),1)]),d("div",null,[d("button",{class:"btn btnGreenColor",onClick:is},n(s.$t("GLOBAL.GLOBAL_EXPORT")),1),d("button",{class:"mx-2 sm:mx-1 btn btnGreenColor",onClick:Ss},n(s.$t("GLOBAL.GLOBAL_IMPORT")),1),d("button",{class:"btn btnBlueColor",onClick:ds},n(s.$t("ProductSetAdd.PSA_NEWPROCESS")),1)])]),d("div",j,[d("div",q,[d("table",H,[d("thead",null,[d("tr",U,[F,d("th",{class:"tableBorderStyle cursor-pointer hover:bg-purple-600",onClick:t[0]||(t[0]=e=>us("processName"))},[d("span",null,n(s.$t("ProductSetAdd.PSA_PROCESS")),1),""==os.value[0]?(g(),u("span",V,"↕")):i("",!0),"ASC"==os.value[0]?(g(),u("i",J)):i("",!0),"DESC"==os.value[0]?(g(),u("i",W)):i("",!0)]),d("th",{class:"tableBorderStyle cursor-pointer hover:bg-purple-600",onClick:t[1]||(t[1]=e=>us("processStitch"))},[d("span",null,n(s.$t("ProductSetAdd.PSA_STITCH")),1),""==os.value[2]?(g(),u("span",z,"↕")):i("",!0),"ASC"==os.value[2]?(g(),u("i",K)):i("",!0),"DESC"==os.value[2]?(g(),u("i",X)):i("",!0)]),d("th",{class:"tableBorderStyle cursor-pointer hover:bg-purple-600",onClick:t[2]||(t[2]=e=>us("processStitchLength"))},[d("span",null,n(s.$t("GLOBAL.GLOBAL_STITCH_Length")),1),""==os.value[10]?(g(),u("span",Z,"↕")):i("",!0),"ASC"==os.value[10]?(g(),u("i",Q)):i("",!0),"DESC"==os.value[10]?(g(),u("i",Y)):i("",!0)]),d("th",{class:"tableBorderStyle cursor-pointer hover:bg-purple-600",onClick:t[3]||(t[3]=e=>us("processStitchM"))},[d("span",null,n(s.$t("ProductSetAdd.PSA_STITCHLOWLIM")),1),""==os.value[3]?(g(),u("span",ee,"↕")):i("",!0),"ASC"==os.value[3]?(g(),u("i",se)):i("",!0),"DESC"==os.value[3]?(g(),u("i",te)):i("",!0)]),d("th",{class:"tableBorderStyle cursor-pointer hover:bg-purple-600",onClick:t[4]||(t[4]=e=>us("processStitchP"))},[d("span",null,n(s.$t("ProductSetAdd.PSA_STITCHUPLIM")),1),""==os.value[4]?(g(),u("span",le,"↕")):i("",!0),"ASC"==os.value[4]?(g(),u("i",ae)):i("",!0),"DESC"==os.value[4]?(g(),u("i",re)):i("",!0)]),d("th",{class:"tableBorderStyle cursor-pointer hover:bg-purple-600",onClick:t[5]||(t[5]=e=>us("processCut"))},[d("span",null,n(s.$t("ProductSetAdd.PSA_TRIM")),1),""==os.value[5]?(g(),u("span",oe,"↕")):i("",!0),"ASC"==os.value[5]?(g(),u("i",ce)):i("",!0),"DESC"==os.value[5]?(g(),u("i",pe)):i("",!0)]),d("th",{class:"tableBorderStyle cursor-pointer hover:bg-purple-600",onClick:t[6]||(t[6]=e=>us("ProcessTimes"))},[d("span",null,n(s.$t("ProductSetAdd.PSA_TIMES")),1),""==os.value[6]?(g(),u("span",ue,"↕")):i("",!0),"ASC"==os.value[6]?(g(),u("i",de)):i("",!0),"DESC"==os.value[6]?(g(),u("i",ne)):i("",!0)]),d("th",{class:"tableBorderStyle cursor-pointer hover:bg-purple-600",onClick:t[7]||(t[7]=e=>us("ProcessGSD"))},[d("span",null,n(s.$t("ProductSetAdd.PSA_GSD")),1),""==os.value[8]?(g(),u("span",ie,"↕")):i("",!0),"ASC"==os.value[8]?(g(),u("i",Se)):i("",!0),"DESC"==os.value[8]?(g(),u("i",ve)):i("",!0)]),d("th",{class:"tableBorderStyle cursor-pointer hover:bg-purple-600 py-2",onClick:t[8]||(t[8]=e=>us("ProcessType"))},[d("span",null,n(s.$t("ProductSetAdd.PSA_CAL")),1),""==os.value[7]?(g(),u("span",me,"↕")):i("",!0),"ASC"==os.value[7]?(g(),u("i",he)):i("",!0),"DESC"==os.value[7]?(g(),u("i",ye)):i("",!0)]),d("th",Pe,n(s.$t("GLOBAL.GLOBAL_DELETE")),1)])]),S(m(e),{modelValue:ss.value,"onUpdate:modelValue":t[9]||(t[9]=e=>ss.value=e),tag:"tbody","item-key":"name"},{item:v((({element:e,index:t})=>[d("tr",{class:C(["cursor-pointer hover:bg-purple-400",[[e.processName==P.newProcessName?"isNewBgColor":""],[1==e.processMajor?"text-green-300":"text-white"]]])},[d("td",be,n(t+1),1),d("td",Ae,[S(l,{to:{name:"ProductSetEditNext",query:{productId:m(Ke),processId:e.processId}}},{default:v((()=>[d("div",ge,[1==e.processMajor?(g(),u("i",Ce)):i("",!0),f(" "+n(e.processName),1)])])),_:2},1032,["to"])]),d("td",fe,[S(l,{to:{name:"ProductSetEditNext",query:{productId:m(Ke),processId:e.processId}}},{default:v((()=>[d("div",ke,n(e.processStitch),1)])),_:2},1032,["to"])]),d("td",Le,[S(l,{to:{name:"ProductSetEditNext",query:{productId:m(Ke),processId:e.processId}}},{default:v((()=>[d("div",Ie,n(e.processStitchLength),1)])),_:2},1032,["to"])]),d("td",_e,[S(l,{to:{name:"ProductSetEditNext",query:{productId:m(Ke),processId:e.processId}}},{default:v((()=>[d("div",Ee,n(e.processStitchM),1)])),_:2},1032,["to"])]),d("td",xe,[S(l,{to:{name:"ProductSetEditNext",query:{productId:m(Ke),processId:e.processId}}},{default:v((()=>[d("div",Te,n(e.processStitchP),1)])),_:2},1032,["to"])]),d("td",we,[S(l,{to:{name:"ProductSetEditNext",query:{productId:m(Ke),processId:e.processId}}},{default:v((()=>[d("div",Be,n(e.processCut),1)])),_:2},1032,["to"])]),d("td",Ne,[S(l,{to:{name:"ProductSetEditNext",query:{productId:m(Ke),processId:e.processId}}},{default:v((()=>[d("div",Oe,n(e.processTimes),1)])),_:2},1032,["to"])]),d("td",De,[S(l,{to:{name:"ProductSetEditNext",query:{productId:m(Ke),processId:e.processId}}},{default:v((()=>[d("div",Ge,n(e.processGSD),1)])),_:2},1032,["to"])]),d("td",$e,[S(l,{to:{name:"ProductSetEditNext",query:{productId:m(Ke),processId:e.processId}}},{default:v((()=>[d("div",Me,n(ts.value[t]),1)])),_:2},1032,["to"])]),d("td",Re,[d("button",{class:"sm:hidden btn btnRedColor",onClick:s=>{e.processId}},[d("span",qe,n(s.$t("GLOBAL.GLOBAL_DELETE")),1),He],8,je),d("span",{class:"hidden sm:inline",onClick:s=>{e.processId}},Fe,8,Ue)])],2)])),_:1},8,["modelValue"])])]),d("div",Ve,[d("button",{class:"btn btnBlueColor",onClick:t[10]||(t[10]=(...e)=>m(ns)&&m(ns)(...e))},n(s.$t("GLOBAL.GLOBAL_SAVESORT")),1)])])])],64)}}},[["__scopeId","data-v-1284cd9f"]]);export{Je as default};
